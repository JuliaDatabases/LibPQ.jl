<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · LibPQ.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>LibPQ.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><a class="toctext" href="../type-conversions/">Type Conversions</a></li><li class="current"><a class="toctext" href>API</a><ul class="internal"><li><a class="toctext" href="#Public-1">Public</a></li><li><a class="toctext" href="#Internals-1">Internals</a></li></ul></li><li><a class="toctext" href="../faq/">FAQ</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>API</a></li></ul><a class="edit-page" href="https://github.com/invenia/LibPQ.jl/blob/master/docs/src/pages/api.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="LibPQ-API-1" href="#LibPQ-API-1">LibPQ API</a></h1><h2><a class="nav-anchor" id="Public-1" href="#Public-1">Public</a></h2><h3><a class="nav-anchor" id="Connections-1" href="#Connections-1">Connections</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Connection" href="#LibPQ.Connection"><code>LibPQ.Connection</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">mutable struct Connection</code></pre><p>A connection to a PostgreSQL database.</p><p><strong>Fields:</strong></p><ul><li><p><code>conn</code></p><p>A pointer to a libpq PGconn object (C_NULL if closed)</p></li><li><p><code>encoding</code></p><p>libpq client encoding (string encoding of returned data)</p></li><li><p><code>uid_counter</code></p><p>Integer counter for generating connection-level unique identifiers</p></li><li><p><code>type_map</code></p><p>Connection-level type correspondence map</p></li><li><p><code>func_map</code></p><p>Connection-level conversion functions</p></li><li><p><code>closed</code></p><p>True if the connection is closed and the PGconn object has been cleaned up</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL103-L111">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute" href="#LibPQ.execute"><code>LibPQ.execute</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">execute(
    {jl_conn::Connection, query::AbstractString | stmt::Statement},
    [parameters::Union{AbstractVector, Tuple},]
    throw_error::Bool=true,
    column_types::AbstractDict=ColumnTypeMap(),
    type_map::AbstractDict=LibPQ.PQTypeMap(),
    conversions::AbstractDict=LibPQ.PQConversions(),
) -&gt; Result</code></pre><p>Run a query on the PostgreSQL database and return a <code>Result</code>. If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response.</p><p>The query may be passed as <code>Connection</code> and <code>AbstractString</code> (SQL) arguments, or as a <code>Statement</code>.</p><p><code>execute</code> optionally takes a <code>parameters</code> vector which passes query parameters as strings to PostgreSQL.</p><p><code>column_types</code> accepts type overrides for columns in the result which take priority over those in <code>type_map</code>. For information on the <code>column_types</code>, <code>type_map</code>, and <code>conversions</code> arguments, see <a href="../type-conversions/#typeconv-1">Type Conversions</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL827-L851">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.prepare" href="#LibPQ.prepare"><code>LibPQ.prepare</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">prepare(jl_conn::Connection, query::AbstractString) -&gt; Statement</code></pre><p>Create a prepared statement on the PostgreSQL server using libpq. The statement is given an generated unique name using <a href="#LibPQ.unique_id"><code>unique_id</code></a>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Currently the statement is not explicitly deallocated, but it is deallocated at the end of session per the <a href="https://www.postgresql.org/docs/10/sql-deallocate.html">PostgreSQL documentation on DEALLOCATE</a>.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1081-L1091">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Connection}" href="#LibPQ.status-Tuple{LibPQ.Connection}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">status(jl_conn::Connection) -&gt; libpq_c.ConnStatusType</code></pre><p>Return the status of the PostgreSQL database connection according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL409-L417">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{LibPQ.Connection}" href="#Base.close-Tuple{LibPQ.Connection}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">close(jl_conn::Connection)</code></pre><p>Close the PostgreSQL database connection and free the memory used by the <code>PGconn</code> object. This function calls <a href="https://www.postgresql.org/docs/10/libpq-connect.html#LIBPQ-PQFINISH"><code>PQfinish</code></a>, but only if <code>jl_conn.closed</code> is <code>false</code>, to avoid a double-free.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL429-L435">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isopen-Tuple{LibPQ.Connection}" href="#Base.isopen-Tuple{LibPQ.Connection}"><code>Base.isopen</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">isopen(jl_conn::Connection) -&gt; Bool</code></pre><p>Check whether a connection is open.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL446-L450">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.reset!-Tuple{LibPQ.Connection}" href="#LibPQ.reset!-Tuple{LibPQ.Connection}"><code>LibPQ.reset!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">reset!(jl_conn::Connection; throw_error=true)</code></pre><p>Reset the communication to the PostgreSQL server. The <code>PGconn</code> object will be recreated using identical connection parameters.</p><p>See <a href="#LibPQ.handle_new_connection"><code>handle_new_connection</code></a> for information on the <code>throw_error</code> argument.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This function can be called on a connection with status <code>CONNECTION_BAD</code>, for example, but cannot be called on a connection that has been closed.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL453-L465">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Connection}" href="#Base.show-Tuple{IO,LibPQ.Connection}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">show(io::IO, jl_conn::Connection)</code></pre><p>Display a <a href="#LibPQ.Connection"><code>Connection</code></a> by showing the connection status and each connection option.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL612-L616">source</a></section><h3><a class="nav-anchor" id="Results-1" href="#Results-1">Results</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Result" href="#LibPQ.Result"><code>LibPQ.Result</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">mutable struct Result</code></pre><p>A result from a PostgreSQL database query</p><p><strong>Fields:</strong></p><ul><li><p><code>result</code></p><p>A pointer to a libpq PGresult object (C_NULL if cleared)</p></li><li><p><code>column_oids</code></p><p>PostgreSQL Oids for each column in the result</p></li><li><p><code>column_types</code></p><p>Julia types for each column in the result</p></li><li><p><code>not_null</code></p><p>Whether to expect NULL for each column (whether output data can have <code>missing</code>)</p></li><li><p><code>column_funcs</code></p><p>Conversions from PostgreSQL data to Julia types for each column in the result</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL641-L649">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.status-Tuple{LibPQ.Result}" href="#LibPQ.status-Tuple{LibPQ.Result}"><code>LibPQ.status</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">status(jl_result::Result) -&gt; libpq_c.ExecStatusType</code></pre><p>Return the status of a result&#39;s corresponding database query according to libpq. Only <code>CONNECTION_OK</code> and <code>CONNECTION_BAD</code> are valid for blocking connections, and only blocking connections are supported right now.</p><p>See also: <a href="#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>error_message</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL750-L758">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.close-Tuple{LibPQ.Result}" href="#Base.close-Tuple{LibPQ.Result}"><code>Base.close</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">close(jl_result::Result)</code></pre><p>Clean up the memory used by the <code>PGresult</code> object. The <code>Result</code> will no longer be usable.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL772-L777">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.isopen-Tuple{LibPQ.Result}" href="#Base.isopen-Tuple{LibPQ.Result}"><code>Base.isopen</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">isopen(jl_result::Result)</code></pre><p>Determine whether the given <code>Result</code> has been <code>close</code>d, i.e. whether the memory associated with the underlying <code>PGresult</code> object has been cleared.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL786-L791">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_rows-Tuple{LibPQ.Result}" href="#LibPQ.num_rows-Tuple{LibPQ.Result}"><code>LibPQ.num_rows</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_rows(jl_result::Result) -&gt; Int</code></pre><p>Return the number of rows in the query result. This will be 0 if the query would never return data.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL957-L962">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_columns-Tuple{LibPQ.Result}" href="#LibPQ.num_columns-Tuple{LibPQ.Result}"><code>LibPQ.num_columns</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_columns(jl_result::Result) -&gt; Int</code></pre><p>Return the number of columns in the query result. This will be 0 if the query would never return data.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL986-L991">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_affected_rows-Tuple{LibPQ.Result}" href="#LibPQ.num_affected_rows-Tuple{LibPQ.Result}"><code>LibPQ.num_affected_rows</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_affected_rows(jl_result::Result) -&gt; Int</code></pre><p>Return the number of rows affected by the command returning the result. This is useful for counting the rows affected by operations such as INSERT, UPDATE and DELETE that do not return rows but affect them. This will be 0 if the query does not affect any row.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL968-L975">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Result}" href="#Base.show-Tuple{IO,LibPQ.Result}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">show(io::IO, jl_result::Result)</code></pre><p>Show a PostgreSQL result and whether it has been cleared.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL737-L741">source</a></section><h3><a class="nav-anchor" id="Statements-1" href="#Statements-1">Statements</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.Statement" href="#LibPQ.Statement"><code>LibPQ.Statement</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct Statement</code></pre><p>A PostgreSQL prepared statement</p><p><strong>Fields:</strong></p><ul><li><p><code>jl_conn</code></p><p>A <code>Connection</code> for which this statement is valid. It may become invalid if the connection is reset.</p></li></ul><ul><li><p><code>name</code></p><p>An autogenerated neame for the prepared statement (using <a href="#LibPQ.unique_id"><code>unique_id</code></a></p></li><li><p><code>query</code></p><p>The query string of the prepared statement</p></li><li><p><code>description</code></p><p>A <code>Result</code> containing a description of the prepared statement</p></li><li><p><code>num_params</code></p><p>The number of parameters accepted by this statement according to <code>description</code></p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1058-L1066">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_columns-Tuple{LibPQ.Statement}" href="#LibPQ.num_columns-Tuple{LibPQ.Statement}"><code>LibPQ.num_columns</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_columns(stmt::Statement) -&gt; Int</code></pre><p>Return the number of columns that would be returned by executing the prepared statement.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1141-L1145">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_params-Tuple{LibPQ.Statement}" href="#LibPQ.num_params-Tuple{LibPQ.Statement}"><code>LibPQ.num_params</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_params(stmt::Statement) -&gt; Int</code></pre><p>Return the number of parameters in the prepared statement.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1134-L1138">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.show-Tuple{IO,LibPQ.Statement}" href="#Base.show-Tuple{IO,LibPQ.Statement}"><code>Base.show</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">show(io::IO, jl_result::Statement)</code></pre><p>Show a PostgreSQL prepared statement and its query.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1119-L1123">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.load!" href="#LibPQ.load!"><code>LibPQ.load!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">LibPQ.load!(table, connection::LibPQ.Connection, query) -&gt; LibPQ.Statement</code></pre><p>Insert the data from <code>table</code> using <code>query</code>. <code>query</code> will be prepared as a <a href="#LibPQ.Statement"><code>LibPQ.Statement</code></a> and then <a href="#LibPQ.execute"><code>execute</code></a> is run on every row of <code>table</code>.</p><p>For best performance, wrap the call to this function in a PostgreSQL transaction:</p><pre><code class="language-julia-repl">julia&gt; execute(conn, &quot;BEGIN;&quot;);

julia&gt; LibPQ.load!(
           (no_nulls = [&quot;foo&quot;, &quot;baz&quot;], yes_nulls = [&quot;bar&quot;, missing]),
           conn,
           &quot;INSERT INTO libpqjl_test (no_nulls, yes_nulls) VALUES (\$1, \$2);&quot;,
       );

julia&gt; execute(conn, &quot;COMMIT;&quot;);</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/tables.jl#LL40-L60">source</a></section><h3><a class="nav-anchor" id="Copy-1" href="#Copy-1">Copy</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.CopyIn" href="#LibPQ.CopyIn"><code>LibPQ.CopyIn</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct CopyIn</code></pre><pre><code class="language-none">CopyIn(query, data_itr) -&gt; CopyIn</code></pre><p>Create a <code>CopyIn</code> query instance which can be executed to send data to PostgreSQL via a <code>COPY &lt;table_name&gt; FROM STDIN</code> query.</p><p><code>query</code> must be a <code>COPY FROM STDIN</code> query as described in the <a href="https://www.postgresql.org/docs/10/sql-copy.html">PostgreSQL documentation</a>. <code>COPY FROM</code> queries which use a file or <code>PROGRAM</code> source can instead use the standard <a href="#LibPQ.execute"><code>execute</code></a> query interface.</p><p><code>data_itr</code> is an iterable containing chunks of data to send to PostgreSQL. The data can be divided up into arbitrary buffers as it will be reconstituted on the server. The iterated items must be <code>AbstractString</code>s or <code>Array{UInt8}</code>s.</p><p><strong>Fields:</strong></p><ul><li><p><code>query</code></p></li><li><p><code>data_itr</code></p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/copy.jl#LL1-L9">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.execute-Tuple{LibPQ.Connection,LibPQ.CopyIn}" href="#LibPQ.execute-Tuple{LibPQ.Connection,LibPQ.CopyIn}"><code>LibPQ.execute</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">execute(jl_conn::Connection, copyin::CopyIn, args...;
    throw_error::Bool=true, kwargs...
) -&gt; Result</code></pre><p>Runs <a href="#LibPQ.execute"><code>execute</code></a> on <code>copyin</code>&#39;s query, then sends <code>copyin</code>&#39;s data to the server.</p><p>All other arguments are passed through to the <code>execute</code> call for the initial query.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/copy.jl#LL28-L37">source</a></section><h2><a class="nav-anchor" id="Internals-1" href="#Internals-1">Internals</a></h2><h3><a class="nav-anchor" id="Connections-2" href="#Connections-2">Connections</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.handle_new_connection" href="#LibPQ.handle_new_connection"><code>LibPQ.handle_new_connection</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">handle_new_connection(jl_conn::Connection; throw_error=true) -&gt; Connection</code></pre><p>Check status and handle errors for newly-created connections. Also set the client encoding (<a href="https://www.postgresql.org/docs/10/multibyte.html">23.3. Character Set Support</a>) to <code>jl_conn.encoding</code>.</p><p>If <code>throw_error</code> is <code>true</code>, an error will be thrown if the connection&#39;s status is <code>CONNECTION_BAD</code> and the PGconn object will be cleaned up. Otherwise, a warning will be shown and the user should call <code>close</code> or <code>reset!</code> on the returned <code>Connection</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL135-L146">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.server_version" href="#LibPQ.server_version"><code>LibPQ.server_version</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">server_version(jl_conn::Connection) -&gt; VersionNumber</code></pre><p>Get the PostgreSQL version of the server.</p><p>See <a href="https://www.postgresql.org/docs/10/libpq-status.html#LIBPQ-PQSERVERVERSION">33.2. Connection Status Functions</a> for information on the integer returned by <code>PQserverVersion</code> that is parsed by this function.</p><p>See <a href="#LibPQ.@pqv_str"><code>@pqv_str</code></a> for information on how this packages represents PostgreSQL version numbers.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL253-L264">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.encoding" href="#LibPQ.encoding"><code>LibPQ.encoding</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">encoding(jl_conn::Connection) -&gt; String</code></pre><p>Return the client encoding name for the current connection (see <a href="https://www.postgresql.org/docs/10/multibyte.html#CHARSET-TABLE">Table 23.1. PostgreSQL Character Sets</a> for possible values).</p><p>Currently all Julia connections are set to use <code>UTF8</code> as this makes conversion to and from <code>String</code> straighforward.</p><p>See also: <a href="#LibPQ.set_encoding!"><code>set_encoding!</code></a>, <a href="#LibPQ.reset_encoding!"><code>reset_encoding!</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL339-L350">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.set_encoding!" href="#LibPQ.set_encoding!"><code>LibPQ.set_encoding!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">set_encoding!(jl_conn::Connection, encoding::String)</code></pre><p>Set the client encoding for the current connection (see <a href="https://www.postgresql.org/docs/10/multibyte.html#CHARSET-TABLE">Table 23.1. PostgreSQL Character Sets</a> for possible values).</p><p>Currently all Julia connections are set to use <code>UTF8</code> as this makes conversion to and from <code>String</code> straighforward. Other encodings are not explicitly handled by this package and will probably be very buggy.</p><p>See also: <a href="#LibPQ.encoding"><code>encoding</code></a>, <a href="#LibPQ.reset_encoding!"><code>reset_encoding!</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL361-L373">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.reset_encoding!" href="#LibPQ.reset_encoding!"><code>LibPQ.reset_encoding!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">reset_encoding!(jl_conn::Connection, encoding::String)</code></pre><p>Reset the client encoding for the current connection to <code>jl_conn.encoding</code>.</p><p>See also: <a href="#LibPQ.encoding"><code>encoding</code></a>, <a href="#LibPQ.set_encoding!"><code>set_encoding!</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL386-L392">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.transaction_status" href="#LibPQ.transaction_status"><code>LibPQ.transaction_status</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">transaction_status(jl_conn::Connection) -&gt; libpq_c.PGTransactionStatusType</code></pre><p>Return the PostgreSQL database server&#39;s current in-transaction status for the connection. See <a href="https://www.postgresql.org/docs/10/libpq-status.html#LIBPQ-PQTRANSACTIONSTATUS"></a> for information on the meaning of the possible return values.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL420-L426">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.unique_id" href="#LibPQ.unique_id"><code>LibPQ.unique_id</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">unique_id(jl_conn::Connection, prefix::AbstractString=&quot;&quot;) -&gt; String</code></pre><p>Return a valid PostgreSQL identifier that is unique for the current connection. This is mostly used to create names for prepared statements.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL397-L402">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Connection}" href="#LibPQ.error_message-Tuple{LibPQ.Connection}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">error_message(jl_conn::Connection) -&gt; String</code></pre><p>Return the error message most recently generated by an operation on the connection. Includes a trailing newline.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL477-L482">source</a></section><h3><a class="nav-anchor" id="Connection-Info-1" href="#Connection-Info-1">Connection Info</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConnectionOption" href="#LibPQ.ConnectionOption"><code>LibPQ.ConnectionOption</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct ConnectionOption</code></pre><p>A Julia representation of a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p><strong>Fields:</strong></p><ul><li><p><code>keyword</code></p><p>The name of the option</p></li><li><p><code>envvar</code></p><p>The name of the fallback environment variable for this option</p></li><li><p><code>compiled</code></p><p>The PostgreSQL compiled-in default for this option</p></li><li><p><code>val</code></p><p>The value of the option if set</p></li><li><p><code>label</code></p><p>The label of the option for display</p></li><li><p><code>disptype</code></p><p>Indicator for how to display the option (see <a href="#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>)</p></li><li><p><code>dispsize</code></p><p>The size of field to provide for entry of the option value (not used here)</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL513-L521">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.conninfo" href="#LibPQ.conninfo"><code>LibPQ.conninfo</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">conninfo(jl_conn::Connection) -&gt; Vector{ConnectionOption}</code></pre><p>Get all connection options for a connection.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL554-L558">source</a><div><div><pre><code class="language-none">conninfo(str::AbstractString) -&gt; Vector{ConnectionOption}</code></pre><p>Parse connection options from a connection string (either a URI or key-value pairs).</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL588-L592">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.ConninfoDisplay" href="#LibPQ.ConninfoDisplay"><code>LibPQ.ConninfoDisplay</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Indicator for how to display a PostgreSQL connection option (<code>PQconninfoOption</code>).</p><p>Possible values are:</p><ul><li><code>Normal</code> (libpq: &quot;&quot;): display as is</li><li><code>Password</code> (libpq: &quot;*&quot;): hide the value of this field</li><li><code>Debug</code> (libpq: &quot;D&quot;): don&#39;t show by default</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/099e826241fca365a120df9bac9a9fede6e7bae4/base/#L0-L8">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}" href="#Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}"><code>Base.parse</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">parse(::Type{ConninfoDisplay}, str::AbstractString) -&gt; ConninfoDisplay</code></pre><p>Parse a <code>ConninfoDisplay</code> from a string. See <a href="#LibPQ.ConninfoDisplay"><code>ConninfoDisplay</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL496-L500">source</a></section><h3><a class="nav-anchor" id="Results-and-Statements-1" href="#Results-and-Statements-1">Results and Statements</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.handle_result" href="#LibPQ.handle_result"><code>LibPQ.handle_result</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">handle_result(jl_result::Result; throw_error::Bool=true) -&gt; Result</code></pre><p>Check status and handle errors for newly-created result objects.</p><p>If <code>throw_error</code> is <code>true</code>, throw an error and clear the result if the query results in a fatal error or unreadable response. Otherwise a warning is shown.</p><p>Also print an info message about the result.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL794-L804">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_name" href="#LibPQ.column_name"><code>LibPQ.column_name</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">column_name(jl_result::Result, column_number::Integer) -&gt; String</code></pre><p>Return the name of the column at index <code>column_number</code> (1-based).</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL997-L1001">source</a><div><div><pre><code class="language-none">column_name(stmt::Statement, column_number::Integer) -&gt; String</code></pre><p>Return the name of the column at index <code>column_number</code> (1-based) that would be returned by executing the prepared statement.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1148-L1153">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_names" href="#LibPQ.column_names"><code>LibPQ.column_names</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">column_names(jl_result::Result) -&gt; Vector{String}</code></pre><p>Return the names of all the columns in the query result.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1007-L1011">source</a><div><div><pre><code class="language-none">column_names(stmt::Statement) -&gt; Vector{String}</code></pre><p>Return the names of all the columns in the query result that would be returned by executing the prepared statement.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1158-L1163">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_number" href="#LibPQ.column_number"><code>LibPQ.column_number</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">column_number(jl_result::Result, column_name::Union{AbstractString, Symbol}) -&gt; Int</code></pre><p>Return the index (1-based) of the column named <code>column_name</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1016-L1020">source</a><div><div><pre><code class="language-none">column_number(jl_result::Result, column_idx::Integer) -&gt; Int</code></pre><p>Return the index of the column if it is valid, or error.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1026-L1030">source</a><div><div><pre><code class="language-none">column_number(stmt::Statement, column_name::AbstractString) -&gt; Int</code></pre><p>Return the index (1-based) of the column named <code>column_name</code> that would be returned by executing the prepared statement.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1166-L1171">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_oids" href="#LibPQ.column_oids"><code>LibPQ.column_oids</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">column_oids(jl_result::Result) -&gt; Vector{LibPQ.Oid}</code></pre><p>Return the PostgreSQL oids for each column in the result.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1039-L1043">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.column_types" href="#LibPQ.column_types"><code>LibPQ.column_types</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">column_types(jl_result::Result) -&gt; Vector{Type}</code></pre><p>Return the corresponding Julia types for each column in the result.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL1046-L1050">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_params-Tuple{LibPQ.Result}" href="#LibPQ.num_params-Tuple{LibPQ.Result}"><code>LibPQ.num_params</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">num_params(jl_result::Result) -&gt; Int</code></pre><p>Return the number of parameters in a prepared statement. If this result did not come from the description of a prepared statement, return 0.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL946-L951">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.error_message-Tuple{LibPQ.Result}" href="#LibPQ.error_message-Tuple{LibPQ.Result}"><code>LibPQ.error_message</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">error_message(jl_result::Result) -&gt; String</code></pre><p>Return the error message associated with the result, or an empty string if there was no error. Includes a trailing newline.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL761-L767">source</a></section><h3><a class="nav-anchor" id="Type-Conversions-1" href="#Type-Conversions-1">Type Conversions</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.oid" href="#LibPQ.oid"><code>LibPQ.oid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">oid(typ::Union{Symbol, String, Integer}) -&gt; LibPQ.Oid</code></pre><p>Convert a PostgreSQL type from an <code>AbstractString</code> or <code>Symbol</code> representation to its oid representation. Integers are converted directly to <code>LibPQ.Oid</code>s.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL129-L135">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.PQChar" href="#LibPQ.PQChar"><code>LibPQ.PQChar</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">primitive type PQChar 8</code></pre><p>A one-byte character type for correspondence with PostgreSQL&#39;s one-byte &quot;char&quot; type.</p><p><strong>Fields:</strong></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL262-L270">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.PQ_SYSTEM_TYPES" href="#LibPQ.PQ_SYSTEM_TYPES"><code>LibPQ.PQ_SYSTEM_TYPES</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">const PQ_SYSTEM_TYPES::Dict{Symbol, Oid}</code></pre><p>Internal mapping of PostgreSQL&#39;s default types from PostgreSQL internal name to Oid. The names may not correspond well to the common names, e.g., &quot;char(n)&quot; is :bpchar. This dictionary is generated with the <code>deps/system_type_map.jl</code> script and contains only PostgreSQL&#39;s system-defined types. It is expected (but might not be guaranteed) that these are the same across versions and installations.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL1-L10">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.PQTypeMap" href="#LibPQ.PQTypeMap"><code>LibPQ.PQTypeMap</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct PQTypeMap &lt;: AbstractDict{UInt32,Type}</code></pre><p>A mapping from PostgreSQL Oid to Julia type.</p><p><strong>Fields:</strong></p><ul><li><code>type_map</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL142-L150">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.getindex-Tuple{LibPQ.PQTypeMap,Any}" href="#Base.getindex-Tuple{LibPQ.PQTypeMap,Any}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Base.getindex(tmap::PQTypeMap, typ) -&gt; Type</code></pre><p>Get the Julia type corresponding to the given PostgreSQL type (any type accepted by <a href="#LibPQ.oid"><code>oid</code></a>) according to <code>tmap</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL171-L176">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.setindex!-Tuple{LibPQ.PQTypeMap,Type,Any}" href="#Base.setindex!-Tuple{LibPQ.PQTypeMap,Type,Any}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Base.setindex!(tmap::PQTypeMap, val::Type, typ)</code></pre><p>Set the Julia type corresponding to the given PostgreSQL type (any type accepted by <a href="#LibPQ.oid"><code>oid</code></a>) in <code>tmap</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL179-L184">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ._DEFAULT_TYPE_MAP" href="#LibPQ._DEFAULT_TYPE_MAP"><code>LibPQ._DEFAULT_TYPE_MAP</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">const _DEFAULT_TYPE_MAP::PQTypeMap</code></pre><p>The <a href="#LibPQ.PQTypeMap"><code>PQTypeMap</code></a> containing the default type mappings for LibPQ.jl. This should not be mutated; LibPQ-level type mappings can be added to <a href="#LibPQ.LIBPQ_TYPE_MAP"><code>LIBPQ_TYPE_MAP</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL195-L201">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.LIBPQ_TYPE_MAP" href="#LibPQ.LIBPQ_TYPE_MAP"><code>LibPQ.LIBPQ_TYPE_MAP</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">const LIBPQ_TYPE_MAP::PQTypeMap</code></pre><p>The <a href="#LibPQ.PQTypeMap"><code>PQTypeMap</code></a> containing LibPQ-level type mappings for LibPQ.jl. Adding type mappings to this constant will override the default type mappings for all code using LibPQ.jl.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL54-L60">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.PQConversions" href="#LibPQ.PQConversions"><code>LibPQ.PQConversions</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct PQConversions &lt;: AbstractDict{Tuple{UInt32,Type},Union{Function, Type}}</code></pre><p>A mapping from Oid and Julia type pairs to the function for converting a PostgreSQL value with said Oid to said Julia type.</p><p><strong>Fields:</strong></p><ul><li><code>func_map</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL207-L215">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.getindex-Tuple{LibPQ.PQConversions,Tuple{Any,Type}}" href="#Base.getindex-Tuple{LibPQ.PQConversions,Tuple{Any,Type}}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Base.getindex(cmap::PQConversions, oid_typ::Tuple{Any, Type}) -&gt; Base.Callable</code></pre><p>Get the function according to <code>cmap</code> for converting a PostgreSQL value of some PostgreSQL type (any type accepted by <a href="#LibPQ.oid"><code>oid</code></a>) to some Julia type.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL221-L226">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.setindex!-Tuple{LibPQ.PQConversions,Union{Function, Type},Tuple{Any,Type}}" href="#Base.setindex!-Tuple{LibPQ.PQConversions,Union{Function, Type},Tuple{Any,Type}}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">Base.setindex!(cmap::PQConversions, val::Base.Callable, oid_typ::Tuple{Any, Type})</code></pre><p>Set the function in <code>cmap</code> for converting a PostgreSQL value of some PostgreSQL type (any type accepted by <a href="#LibPQ.oid"><code>oid</code></a>) to some Julia type.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL231-L236">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ._DEFAULT_CONVERSIONS" href="#LibPQ._DEFAULT_CONVERSIONS"><code>LibPQ._DEFAULT_CONVERSIONS</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">const _DEFAULT_CONVERSIONS::PQConversions</code></pre><p>The <a href="#LibPQ.PQConversions"><code>PQConversions</code></a> containing the default conversion functions for LibPQ.jl. This should not be mutated; LibPQ-level conversion functions can be added to <a href="#LibPQ.LIBPQ_CONVERSIONS"><code>LIBPQ_CONVERSIONS</code></a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/typemaps.jl#LL251-L257">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.LIBPQ_CONVERSIONS" href="#LibPQ.LIBPQ_CONVERSIONS"><code>LibPQ.LIBPQ_CONVERSIONS</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><pre><code class="language-julia">const LIBPQ_CONVERSIONS::PQConversions</code></pre><p>The <a href="#LibPQ.PQConversions"><code>PQConversions</code></a> containing LibPQ-level conversion functions for LibPQ.jl. Adding conversions to this constant will override the default conversions for all code using LibPQ.jl.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL63-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ._FALLBACK_CONVERSION" href="#LibPQ._FALLBACK_CONVERSION"><code>LibPQ._FALLBACK_CONVERSION</code></a> — <span class="docstring-category">Constant</span>.</div><div><div><p>A fallback conversion mapping (like <a href="#LibPQ.PQConversions"><code>PQConversions</code></a> which holds a single function for converting PostgreSQL data of a given Oid to a given Julia type, using the <a href="#Base.parse-Tuple{Type{LibPQ.ConninfoDisplay},AbstractString}"><code>parse</code></a> function.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL350-L354">source</a></section><h3><a class="nav-anchor" id="Parsing-1" href="#Parsing-1">Parsing</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.PQValue" href="#LibPQ.PQValue"><code>LibPQ.PQValue</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">struct PQValue{OID}</code></pre><p>A wrapper for one value in a PostgreSQL result.</p><p><strong>Fields:</strong></p><ul><li><p><code>jl_result</code></p><p>PostgreSQL result</p></li><li><p><code>row</code></p><p>Row index of the result (0-indexed)</p></li><li><p><code>col</code></p><p>Column index of the result (0-indexed)</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL1-L9">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.data_pointer" href="#LibPQ.data_pointer"><code>LibPQ.data_pointer</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">data_pointer(pqv::PQValue) -&gt; Ptr{UInt8}</code></pre><p>Get a raw pointer to the data for one value in a PostgreSQL result. This data will be freed by libpq when the result is cleared, and should only be used temporarily.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL42-L48">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.num_bytes" href="#LibPQ.num_bytes"><code>LibPQ.num_bytes</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">num_bytes(pqv::PQValue) -&gt; Cint</code></pre><p>The length in bytes of the <code>PQValue</code>&#39;s corresponding data. LibPQ.jl currently always uses text format, so this is equivalent to C&#39;s <code>strlen</code>.</p><p>See also: <a href="#LibPQ.data_pointer"><code>data_pointer</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL32-L39">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.unsafe_string-Tuple{LibPQ.PQValue}" href="#Base.unsafe_string-Tuple{LibPQ.PQValue}"><code>Base.unsafe_string</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">unsafe_string(pqv::PQValue) -&gt; String</code></pre><p>Construct a <code>String</code> from a <code>PQValue</code> by copying the data.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL51-L55">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.string_view" href="#LibPQ.string_view"><code>LibPQ.string_view</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">string_view(pqv::PQValue) -&gt; String</code></pre><p>Wrap a <code>PQValue</code>&#39;s underlying data in a <code>String</code>. This function uses <a href="#LibPQ.data_pointer"><code>data_pointer</code></a> and <a href="#LibPQ.num_bytes"><code>num_bytes</code></a> and does not copy.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The underlying data will be freed by libpq when the result is cleared, and should only be used temporarily.</p></div></div><p>See also: <a href="#LibPQ.bytes_view"><code>bytes_view</code></a></p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL60-L72">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.bytes_view" href="#LibPQ.bytes_view"><code>LibPQ.bytes_view</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">bytes_view(pqv::PQValue) -&gt; Vector{UInt8}</code></pre><p>Wrap a <code>PQValue</code>&#39;s underlying data in a vector of bytes. This function uses <a href="#LibPQ.data_pointer"><code>data_pointer</code></a> and <a href="#LibPQ.num_bytes"><code>num_bytes</code></a> and does not copy.</p><p>This function differs from <a href="#LibPQ.string_view"><code>string_view</code></a> as it keeps the <code> </code> byte at the end. <code>PQValue</code> parsing functions should use <code>bytes_view</code> when the data returned by PostgreSQL is not in UTF-8.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The underlying data will be freed by libpq when the result is cleared, and should only be used temporarily.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL77-L91">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.parse-Tuple{Type{Any},LibPQ.PQValue}" href="#Base.parse-Tuple{Type{Any},LibPQ.PQValue}"><code>Base.parse</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">parse(::Type{T}, pqv::PQValue) -&gt; T</code></pre><p>Parse a value of type <code>T</code> from a <code>PQValue</code>. By default, this uses any existing <code>parse</code> method for parsing a value of type <code>T</code> from a <code>String</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/parsing.jl#LL103-L109">source</a></section><h3><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.@pqv_str" href="#LibPQ.@pqv_str"><code>LibPQ.@pqv_str</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@pqv_str -&gt; VersionNumber</code></pre><p>Parse a PostgreSQL version.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>As of version 10.0, PostgreSQL moved from a three-part version number (where the first two parts represent the major version and the third represents the minor version) to a two-part major-minor version number. In LibPQ.jl, we represent this using the first two <code>VersionNumber</code> components as the major version and the third as the minor version.</p><h2>Examples</h2><pre><code class="language-julia-repl">julia&gt; using LibPQ: @pqv_str

julia&gt; pqv&quot;10.1&quot; == v&quot;10.0.1&quot;
true

julia&gt; pqv&quot;9.2.5&quot; == v&quot;9.2.5&quot;
true</code></pre></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL280-L304">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.string_parameters" href="#LibPQ.string_parameters"><code>LibPQ.string_parameters</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">string_parameters(parameters::AbstractVector) -&gt; Vector{Union{String, Missing}}</code></pre><p>Convert parameters to strings which can be passed to libpq, propagating <code>missing</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL891-L895">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.parameter_pointers" href="#LibPQ.parameter_pointers"><code>LibPQ.parameter_pointers</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">parameter_pointers(parameters::AbstractVector{&lt;:Parameter}) -&gt; Vector{Ptr{UInt8}}</code></pre><p>Given a vector of parameters, returns a vector of pointers to either the string bytes in the original or <code>C_NULL</code> if the element is <code>missing</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/LibPQ.jl#LL930-L935">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="LibPQ.unsafe_string_or_null" href="#LibPQ.unsafe_string_or_null"><code>LibPQ.unsafe_string_or_null</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">unsafe_string_or_null(ptr::Cstring) -&gt; Union{String, Missing}</code></pre><p>Convert a <code>Cstring</code> to a <code>Union{String, Missing}</code>, returning <code>missing</code> if the pointer is <code>C_NULL</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/invenia/LibPQ.jl/blob/1f706da122f5cf483e3ca77118f08ca7127ab525/src/utils.jl#LL1-L6">source</a></section><footer><hr/><a class="previous" href="../type-conversions/"><span class="direction">Previous</span><span class="title">Type Conversions</span></a><a class="next" href="../faq/"><span class="direction">Next</span><span class="title">FAQ</span></a></footer></article></body></html>
